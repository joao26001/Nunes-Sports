{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="João Fellipe" />
        <title>Nunes Sports</title>
        <link rel="icon" type="image/x-icon" href="{% static 'assets/favicon.ico' %}" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- JQUERY -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    </head>
    <body>
        <!-- Navigation-->

        <!-- Page Header-->

        <!-- Main Content-->
        <div class="container px-4 px-lg-5">
            <div class="row px-4 px-lg-5">
                <h2>Produtos:</h2>
                {% for produto in produtos %}
                    <div class="col-4 pb-5">
                        <div class="card rounded" style="height: 100%;">
                            <div class="card-body text-center">
                                <h4 class="card-title">{{ produto.nomeProduto }}</h4>
                                <p class="card-text">Código: {{ produto.codigoProduto }}</p>
                                <p class="card-text">Descrição: {{ produto.descricaoProduto }}</p>
                            </div>
                            <div class="card-footer text-center">
                                <p class="card-text">Preço: {{ produto.precoProduto }}</p>
                                <a href="?edit={{ produto.id }}" class="btn btn-primary">Editar</a>
                                <!-- Botão de deletar -->
                                <form method="post" style="display: inline;">
                                    {% csrf_token %}
                                    <input type="hidden" name="delete" value="{{ produto.id }}">
                                    <button type="submit" class="btn btn-danger">Deletar</button>
                                </form>                                
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        
            <!-- Divider -->
            <hr class="my-4" />
        
            <!-- Formulário para criar ou editar produto -->
            <h1>{% if form.instance.id %}Editar Produto{% else %}Criar Novo Produto{% endif %}</h1>

            <form method="post">
                {% csrf_token %}
                {% if form.instance.id %}
                <input type="hidden" name="produto_id" value="{{ form.instance.id }}">
                {% else %}
                {% endif %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-success">Salvar</button>
            </form>

        </div>
        <!-- Sub Content -->

        <!-- Footer-->

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="{% static 'js/scripts.js' %}"></script>
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    </body>
</html>